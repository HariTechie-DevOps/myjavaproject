<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Forgot Password</title>

<style>
body { font-family: Arial; background: #f5f5f5; }
.box {
  width: 360px;
  margin: 50px auto;
  background: white;
  padding: 25px;
}
label { margin-top: 12px; display:block; }
input { width:100%; padding:8px; }
.error { color:red; font-size:12px; display:none; }
button {
  width:100%; margin-top:20px; padding:10px;
  background:#007bff; color:white; border:none;
}
</style>
</head>

<body>

<div class="box">
  <h2>Forgot Password</h2>

  <label>Name</label>
  <input id="name">
  <div class="error" id="nameError"></div>

  <label>Mobile</label>
  <input id="mobile">
  <div class="error" id="mobileError"></div>

  <label>New Password</label>
  <input id="newPassword" type="password">

  <label>Confirm Password</label>
  <input id="confirmPassword" type="password">
  <div class="error" id="passwordError"></div>

  <button onclick="reset()">Proceed</button>
</div>

<script>
function reset() {
  document.querySelectorAll(".error").forEach(e => e.style.display="none");

  const name = name.value;
  const mobile = mobile.value;
  const newPassword = newPassword.value;
  const confirmPassword = confirmPassword.value;

  if (newPassword !== confirmPassword) {
    passwordError.innerText = "Passwords do not match";
    passwordError.style.display = "block";
    return;
  }

  fetch("http://localhost:8080/api/forgot-password", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body: JSON.stringify({ name, mobile, newPassword })
  })
  .then(res=>res.json())
  .then(data=>{
    if(!data.success){
      document.getElementById(data.field+"Error").innerText=data.message;
      document.getElementById(data.field+"Error").style.display="block";
      return;
    }
    alert("Password updated successfully");
    window.location.href="signin.html";
  });
}
</script>

</body>
</html>
